\chapter{Konzept, Entwurf und Implementierung}
\label{cha:implementierung}

% Abschnitt: Implementierungsdetails
\section{Implementierungsdetails}
\label{sec:implementierung:implementierungsdetails}

Wir erklären in diesem Kapitel die einzelnen Funktionen unserer Anwendung ausführlicher. Dies wird unterstützt durch Screenshots und den zugehörigen Mockups, die zu Beginn des Projekts erstellt wurden, um dem Kunden seine Vorstellungen visuell präsentieren zu können.

%Bildervorlage
\begin{figure}[h]
    \centering
    \begin{minipage}{0.49\textwidth}
        \centering
        \includegraphics[width=0.49\textwidth, trim=150 200 200 200, 
        clip]{img/screenshots/ss_parkuebersicht.png}
        \caption{Parkübersicht}
		\label{figure:implementierungparkuebersicht}
    \end{minipage}
    \begin{minipage}{0.49\textwidth}
        \centering
        \includegraphics[width=0.49\textwidth]{img/mockups/m_parkuebersicht.png}
        \caption{Mockup Parkübersicht}
    \end{minipage}
\end{figure}

Nach dem Öffnen der Anwendung befindet man sich auf der Startseite unserer App. Diese ist auch zugleich die Parkübersicht, welche in Abbildung \ref{figure:implementierungparkuebersicht} zu sehen ist. Die Parkübersicht ist eine Liste aller Parks, die man durchsuchen und nach Alphabet, Bewertung oder Entfernung sortieren kann. Außerdem ist die Liste in zwei Tabs unterteilt. Zum Einen das Tab 'Alle', in dem, wie der Name schon sagt, alle Parks angezeigt werden, und als zweites noch das Tab 'Favoriten' in dem alle Parks angezeigt werden, die der Nutzer sich als Favorit markiert hat. 

\begin{figure}[h]
    \centering
    \begin{minipage}{0.49\textwidth}
        \centering
        \includegraphics[width=0.49\textwidth, trim=150 200 200 200, 
        clip]{img/screenshots/ss_sidebar_menu.png}
        \caption{Seitenmenü}
		\label{figure:implementierungsidebar}
    \end{minipage}
\end{figure}

Jederzeit in der Anwendung ist das Seitenmenü (s. Abbildung \ref{figure:implementierungsidebar}) verfügbar, in dem sich der Nutzer ein- oder ausloggen oder zur 'Startseite', der Parkübersicht, zurückkehren kann.

Ist ein Nutzer eingeloggt kann er Park und Attraktionen erstellen und bearbeiten, Wartezeiten eintragen und Bewertungen abgeben. Möchte man sich nicht einloggen kann man die App trotzdem als Informationsquelle nutzen, denn man kann alle Infos wie Wartezeiten und Bewertungen sehen, ohne eingeloggt zu sein. 

Falls man als Nutzer, über den orangenen Plus-Button unten rechts in der Parkübersicht, einen Park erstellt hat, wird neben dem Namen des Parks das Piktogramm eines Stifts angezeigt, was bedeutet, dass man selber Admin des Parks ist und diesen und seine Attraktionen bearbeiten kann. \\

\begin{figure}[h]
    \centering
    \begin{minipage}{0.49\textwidth}
        \centering
        \includegraphics[width=0.49\textwidth, trim=150 200 200 200, 
        clip]{img/screenshots/ss_parkdetail.png}
        \caption{Parkansicht}
		\label{figure:implementierungparkansicht}
    \end{minipage}
    \begin{minipage}{0.49\textwidth}
        \centering
        \includegraphics[width=0.49\textwidth]{img/mockups/m_park_detail.png}
        \caption{Mockup Parkansicht}
    \end{minipage}
\end{figure}

Wählt man nun, durch das Tippen auf einen Park, diesen aus, so kommt man als nächstes auf die Parkdetailansicht, welche in Abbildung \ref{figure:implementierungparkansicht} zu sehen ist. 

Oben auf der Seite ist immer ein Bild des Parks zu sehen. Darunter befinden sich das Herz als Symbol für 'Favorit' das sich aktivieren und deaktivieren lässt, der Parkname, der Ort und falls GPS aktiviert ist auch die aktuelle Entfernung zum Park. Der Standort des Parks lässt sich außerdem durch den Button auf der rechten Seite auf GoogleMaps anzeigen (s. Abbildung \ref{figure:implementierungstandort}). 

Es befindet sich des Weiteren auch noch eine Anzeige der durchschnittlichen Bewertung (Skala von 0 bis 5) auf dieser Seite. Der Durchschnitt wird einmal als Sterne dargestellt und einmal als Dezimalzahl mit einer Nachkommastelle. Durch das Tippen auf die Sterne oder die Zahl lässt sich die Seite der Bewertungen öffnen, was aber weiter unten gezeigt wird. 

Zusätzlich sind auch noch allgemeine Infos zum Park gegeben, wie z. B. die Öffnungszeiten. 

Durch den am unteren Bildrand gelegenen Button 'Attraktionen' kommt man dann weiter zu den Attraktionen des Parks, die wieder, wie auch schon die Parks, als Liste gegeben sind.

\begin{figure}[h]
    \centering
    \begin{minipage}{0.49\textwidth}
        \centering
        \includegraphics[width=0.49\textwidth, trim=150 200 200 200, 
        clip]{img/screenshots/ss_attraktionsuebersicht.png}
        \caption{Attraktionsübersicht}
		\label{figure:implementierungattraktionsuebersicht}
    \end{minipage}
    \begin{minipage}{0.49\textwidth}
        \centering
        \includegraphics[width=0.49\textwidth]{img/mockups/m_attraktionsuebersicht.png}
        \caption{Mockup Attraktionsübersicht}
    \end{minipage}
\end{figure}

Die Seite aller Attraktionen eines Parks, die sog. Attraktionsübersicht, die in Abbildung \ref{figure:implementierungattraktionsuebersicht} zu sehen ist, ist sehr ähnlich aufgebaut wie die Parkübersicht. 

Es gibt ebenfalls die Möglichkeiten zur Ansicht aller Attraktionen oder nur der Favoriten und zur Sortierung und Suche, aber hinzu kommt noch die Möglichkeit zum Filtern der Liste nach Kategorien der Attraktionen, wie z. B. Achterbahn, Kinderbahn oder Restaurant. Die einzelnen Elemente der Liste bestehen aus Bild, Name und Bewertung und dazuhin noch der Wartezeit in Minuten und wann diese eingetragen wurde. Die Farben der Wartezeiten bedeuten einfach dass man entweder nur kurz anstehen muss (grün), durchschnittlich lang (gelb) oder dass momentan die Wartezeit sehr hoch ist (rot). Später wird aber noch genauer auf die Wartezeiten eingegangen und auch der Algorithmus dahinter erklärt. 

Wählt man nun eine Attraktion aus der Liste aus kommt man zur Detailansicht dieser Attraktion, wie in Abbildung \ref{figure:implementierungattraktionsansicht} zu sehen.

\newpage

\begin{figure}[h]
    \centering
    \begin{minipage}{0.49\textwidth}
        \centering
        \includegraphics[width=0.49\textwidth, trim=150 200 200 200, 
        clip]{img/screenshots/ss_attraktionsdetail.png}
        \caption{Attraktionsdetail}
		\label{figure:implementierungattraktionsansicht}
    \end{minipage}
    \begin{minipage}{0.49\textwidth}
    	\centering
		\includegraphics[width=0.49\textwidth]{img/mockups/m_attraktionsdetail.png}
		\caption{Mockup Attraktionsdetail}
    \end{minipage}
\end{figure} 

Auf dieser Seite kann man sich, gleich wie bei Parks, die Attraktion als Favorit hinzufügen, den 
Standort anzeigen lassen (s. Abbildung \ref{figure:implementierungstandort}) und die Bewertungen ansehen. Neu hinzu kommt, dass man sich noch weitere 
Informationen über den 'i'-Button anzeigen lassen kann, wo auch unter anderem zu sehen ist, in 
welche der Kategorien die Attraktion gehört (siehe Abbildung 
\ref{figure:implementierungattraktionsinfo}). 

\begin{figure}[H]
	\centering
	\begin{minipage}{0.49\textwidth}
		\centering
		\includegraphics[width=0.49\textwidth, trim=150 200 200 200, 
    	clip]{img/screenshots/ss_mapview_2.png}
    	\caption{Standort}
		\label{figure:implementierungstandort}
	\end{minipage}
	\begin{minipage}{0.49\textwidth}
		\centering
		\includegraphics[width=0.49\textwidth, trim=150 200 200 200, 
    	clip]{img/screenshots/ss_attraktion_info.png}
    	\caption{Attraktions-Info}
		\label{figure:implementierungattraktionsinfo}
	\end{minipage}
\end{figure}

Des Weiteren werden in der Detailansicht einer Attraktion noch mehr Wartezeiten angezeigt, nämlich links der Durchschnitt der letzten drei Eintragungen, in der Mitte der Tagesdurchschnitt und auf der rechten Seite der Gesamtdurchschnitt. 
Darunter wird eine andere Wartezeitstatistik angezeigt. Hier sind auf der x-Achse die Stunden dargestellt und auf der y-Achse die Minuten. Die Säulen des Diagramms sind dann also die durchschnittliche Wartezeit in der angegebenen Stunde, die aus allen bisher eingetragenen Wartezeiten berechnet wird. 

Ganz unten wird, falls der Nutzer eingeloggt ist, noch ein Feld zum selbst Wartezeiten eintragen angezeigt. Das Eintragen ist aber nur möglich, falls sich der Nutzer zusätzlich noch im Park befindet (GPS muss aktiviert sein) und nicht schon innerhalb der letzten Stunde für diese Attraktion eine Wartezeit eingetragen hat. 

Will man nun die Bewertungen einer Attraktion bzw. eines Parks sehen oder diese auch selbst bewerten, kommt man auf die in Abbildung \ref{figure:implementierungbewertungen} zu sehende Activity.

\begin{figure}[h]
    \centering
    \begin{minipage}{0.49\textwidth}
        \centering
        \includegraphics[width=0.49\textwidth, trim=150 200 200 200, 
        clip]{img/screenshots/ss_bewertungen.png}
        \caption{Bewertungen}
		\label{figure:implementierungbewertungen}
    \end{minipage}
    \begin{minipage}{0.49\textwidth}
        \centering
        \includegraphics[width=0.49\textwidth]{img/mockups/m_park_bewertungen.png}
        \caption{Mockup Bewertungen}
    \end{minipage}
\end{figure} 

Hier sind alle bisherigen Bewertungen mit Nutzername, Datum und Kommentar zu sehen. Diese lassen sich nach Datum oder nach Anzahl der Sterne sortieren.

Um selbst eine Bewertung abzugeben tippt man auf den orangenen Plus-Button unten rechts und es öffnet sich ein Eingabedialog, wie in Abbildung \ref{figure:implementierungbewerten} zu sehen. Falls man zu diesem Park bzw. dieser Attraktion eine Bewertung abgegeben hat, so wird diese hier angezeigt und man kann sie bearbeiten, aber es wird keine neue erstellt. Hat man bisher noch nicht bewertet, vergibt man jetzt 0 bis 5 Sterne, schreibt ein Kommentar und speichert dann mit 'SPEICHERN'. Ein Parkadministrator kann hier auch den Text einer Bewertung zensieren, falls diese anstößig sind.

\begin{figure}[h]
    \centering
    \begin{minipage}{0.49\textwidth}
        \centering
        \includegraphics[width=0.49\textwidth, trim=150 200 200 200, 
        clip]{img/screenshots/ss_bewertung_edit.png}
        \caption{Bewertung verfasssen}
		\label{figure:implementierungbewerten}
    \end{minipage}
    \begin{minipage}{0.49\textwidth}
        \centering
        \includegraphics[width=0.49\textwidth]{img/mockups/m_bewertung_verfassen.png}
        \caption{Mockup Bewertung verfassen}
    \end{minipage}
\end{figure}

Für Attraktionen gibt es eine separate einfache Wartezeiten-Ansicht (vgl. Abbildung \ref{figure:implementierungwartezeiten}), in der die eingetragenen Wartezeiten aller Benutzer zu sehen sind. Diese lässt sich nach Name, Wartezeit, oder Datum sortieren.

\begin{figure}[H]
    \centering
    \begin{minipage}{0.49\textwidth}
        \centering
        \includegraphics[width=0.49\textwidth, trim=150 200 200 200, 
        clip]{img/screenshots/ss_wartezeiten.png}
        \caption{Wartezeiten}
		\label{figure:implementierungwartezeiten}
    \end{minipage}
    \begin{minipage}{0.49\textwidth}
        \centering
        \includegraphics[width=0.49\textwidth]{img/mockups/m_wartezeiten.png}
        \caption{Mockup Wartezeiten}
    \end{minipage}
\end{figure}

Die Anwendung enthält auch einen Editor für Parks und Attraktionen, der es den Administratoren erlaubt, diese zu bearbeiten. Der Editor wird auch benutzt, um Parks und Attraktionen zu erstellen. Der Name und die Informationen zu einem Park bzw. einer Attraktion können direkt eingegeben werden. Die Tags einer Attraktion können aus einer Reihe von vorgegebenen Tags ausgewählt werden. Die genaue Position kann von Hand eingegeben werden oder über ein Google-Maps-Interface bestimmt werden. Bilder können entweder direkt mit der Kamera des Handys aufgenommen werden, aus der Galerie des Handys geladen werden oder es kann ein Link zu einem Bild aus dem Web angegeben werden. Hier wussten wir in der Planphase noch nicht genau, was am Ende herauskommt, und so gibt es einige Abweichungen zwischen Mockup und Implementierung (vgl. Abbildung \ref{figure:implementierungeditor}).


\begin{figure}[h]
	\centering
	\begin{minipage}{0.49\textwidth}
		\centering
		\includegraphics[width=0.49\textwidth, trim=150 200 200 200, 
		clip]{img/screenshots/ss_attraktion_edit.png}
		\caption{Editor (Attraktion)}
		\label{figure:implementierungeditor}
	\end{minipage}
	\begin{minipage}{0.49\textwidth}
		\centering
		\includegraphics[width=0.49\textwidth]{img/mockups/m_editor.png}
		\caption{Mockup Editor}
	\end{minipage}
\end{figure}



















